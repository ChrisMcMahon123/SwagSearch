{"ast":null,"code":"'use strict';\n\nvar request = require('sync-request');\n\nvar urlParse = require('url').parse;\n\nvar isImage = require('is-image');\n\nvar isUrl = require('is-url');\n\nmodule.exports = function (url, accurate, timeout) {\n  if (!url) return false;\n  var http = url.lastIndexOf('http');\n  if (http != -1) url = url.substring(http);\n  if (!isUrl(url)) return isImage(url);\n  var pathname = urlParse(url).pathname;\n  if (!pathname) return false;\n  var last = pathname.search(/[:?&]/);\n  if (last != -1) pathname = pathname.substring(0, last);\n  if (isImage(pathname)) return true;\n  if (/styles/i.test(pathname)) return false;\n\n  try {\n    if (!accurate) return false;\n    if (!timeout) timeout = 60000;\n    var res = request('GET', url, {\n      timeout: timeout\n    });\n    if (!res) return false;\n    var headers = res.headers;\n    if (!headers) return false;\n    var contentType = headers['content-type'];\n    if (!contentType) return false;\n    return contentType.search(/^image\\//) != -1;\n  } catch (e) {\n    return false;\n  }\n};","map":null,"metadata":{},"sourceType":"script"}