{"ast":null,"code":"var Pbf = require('pbf');\n\nvar fs = require('fs');\n\nvar path = require('path');\n\nvar pbf = new Pbf(fs.readFileSync(path.join(__dirname, 'cities.pbf')));\nvar cities = [];\nvar lastLat = 0;\nvar lastLon = 0;\n\nwhile (pbf.pos < pbf.length) {\n  cities.push(pbf.readMessage(readCity, {\n    name: '',\n    country: '',\n    featureCode: '',\n    adminCode: '',\n    population: 0,\n    lat: 0,\n    lon: 0\n  }));\n}\n\nmodule.exports = cities;\n\nfunction readCity(tag, city, pbf) {\n  if (tag === 1) city.name = pbf.readString();else if (tag === 2) city.country = pbf.readString();else if (tag === 3) city.altCountry = pbf.readString();else if (tag === 4) city.muni = pbf.readString();else if (tag === 5) city.muniSub = pbf.readString();else if (tag === 6) city.featureCode = pbf.readString();else if (tag === 7) city.adminCode = pbf.readString();else if (tag === 8) city.population = pbf.readVarint();else if (tag === 9) {\n    lastLat += pbf.readSVarint();\n    city.lat = lastLat / 1e5;\n  } else if (tag === 10) {\n    lastLon += pbf.readSVarint();\n    city.lon = lastLon / 1e5;\n  }\n}","map":null,"metadata":{},"sourceType":"script"}